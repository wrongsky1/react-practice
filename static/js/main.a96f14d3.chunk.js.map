{"version":3,"sources":["components/UI/modal/MyModal.module.css","components/UI/button/MyButton.module.css","components/UI/input/MyInput.module.css","components/UI/Loader/Loader.module.css","components/UI/button/MyButton.jsx","context/index.js","components/UI/navbar/NavBar.jsx","pages/About.jsx","components/UI/input/MyInput.jsx","pages/Login.jsx","API/PostService.js","components/UI/Loader/Loader.jsx","hooks/useFetching.js","pages/PostIdPage.jsx","components/UI/select/MySelect.jsx","components/PostFilter.jsx","components/PostForm.jsx","components/PostItem.jsx","components/PostList.jsx","components/UI/modal/MyModal.jsx","hooks/usePosts.js","utils/pages.js","components/UI/pagination/Pagination.jsx","pages/Posts.jsx","router/index.js","hooks/useObserver.js","components/AppRouter.jsx","App.js","index.js"],"names":["module","exports","MyButton","children","props","className","classes","myBtn","AuthContext","createContext","NavBar","useContext","setIsAuth","isAuth","onClick","localStorage","removeItem","to","About","MyInput","React","forwardRef","ref","myInput","Login","onSubmit","event","preventDefault","setItem","type","placeholder","PostService","limit","page","axios","get","params","_limit","_page","response","id","Loader","loader","useFetching","callback","useState","isLoading","setIsLoading","error","setError","a","message","PostIdPage","useParams","post","setPost","comments","setComments","getById","data","fetchPostById","getCommentsByPostId","fetchComments","isCommentsLoading","useEffect","style","display","justifyContent","marginTop","title","map","comment","email","body","MySelect","options","defaultValue","value","onChange","target","disabled","option","name","PostFilter","filter","setFilter","query","e","sort","selectedSort","PostForm","create","newPost","Date","now","PostItem","router","useHistory","push","remove","PostList","posts","length","textAlign","TransitionGroup","index","CSSTransition","timeout","classNames","number","MyModal","visible","setVisible","rootClasses","myModal","active","join","myModalContent","stopPropagation","usePosts","sortedPosts","useMemo","console","log","b","localeCompare","useSortedPosts","toLowerCase","includes","getPageCount","totalCount","Math","ceil","Pagination","totalPages","changePage","pagesArray","result","i","getPagesArray","p","Posts","privateRoutes","path","component","exact","setPosts","modal","setModal","setTotalPages","setLimit","setPage","sortedAndSearchedPosts","lastElement","useRef","getAll","headers","fetchPosts","isPostsLoading","postError","canLoad","observer","current","disconnect","IntersectionObserver","entries","isIntersecting","observe","useObserver","margin","height","background","publicRoutes","AppRouter","route","App","getItem","Provider","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a96f14d3.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"myModal\":\"MyModal_myModal__2tyRE\",\"myModalContent\":\"MyModal_myModalContent__1pOza\",\"active\":\"MyModal_active__1l3mE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"myBtn\":\"MyButton_myBtn__1rqi-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"myInput\":\"MyInput_myInput__1bS5J\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__1MjUl\",\"rotate\":\"Loader_rotate__3fyxQ\"};","import React from 'react';\nimport classes from './MyButton.module.css'\n\nfunction MyButton({children, ...props}) {\n    return (\n        <button {...props} className={classes.myBtn}>\n            {children}\n        </button>\n    )\n}\n\nexport default MyButton\n","import {createContext} from 'react'\n\nexport const AuthContext = createContext(null)","import React, { useContext } from 'react'\nimport {Link} from 'react-router-dom'\nimport MyButton from '../button/MyButton'\nimport { AuthContext } from '../../../context';\n\nfunction NavBar() {\n    const {isAuth, setIsAuth} = useContext(AuthContext)\n\n    const logout = () => {\n        setIsAuth(false)\n        localStorage.removeItem('auth')\n    }\n    return (\n        <div className=\"navbar\">\n            <MyButton onClick={logout}>\n                Выйти\n            </MyButton>\n            <div className=\"navbar__links\">\n                <Link to=\"/about\">О сайте</Link>\n                <Link to=\"/posts\">Посты</Link>\n            </div>\n        </div>\n    )\n}\n\nexport default NavBar\n","import React from 'react'\n\nfunction About() {\n    return (\n        <h2 className=\"about\">\n            Приложение для создания заметок/постов. Учебный проект по React, hooks, context, routing, pagination\n        </h2>\n    )\n}\n\nexport default About\n","import React from 'react'\nimport classes from './MyInput.module.css'\n\nconst MyInput = React.forwardRef((props, ref) => {\n    return (\n        <input ref={ref} className={classes.myInput} {...props} />\n            \n   \n    )\n})\n\nexport default MyInput\n","import React, { useContext }from 'react'\nimport MyButton from '../components/UI/button/MyButton'\nimport MyInput from '../components/UI/input/MyInput'\nimport { AuthContext } from '../context';\n\nfunction Login() {\n    const {isAuth, setIsAuth} = useContext(AuthContext)\n    const login = event => {\n        event.preventDefault()\n        setIsAuth(true)\n        localStorage.setItem('auth', 'true')\n    }\n    return (\n        <div>\n            <h1>Страница для логина</h1>\n            <form onSubmit={login}>\n                <MyInput type=\"text\" placeholder=\"Введите логин\"/>\n                <MyInput type=\"password\" placeholder=\"Введите пароль\"/>\n                <MyButton>Войти</MyButton>\n            </form>\n        </div>\n    )\n}\n\nexport default Login\n","import axios from 'axios';\n\nexport default class PostService {\n    static async getAll(limit = 10, page = 1) {\n        const response = await axios.get('https://jsonplaceholder.typicode.com/posts', {\n            params: {\n                _limit: limit,\n                _page: page,\n            }\n        })\n        return response\n    }\n\n    static async getById(id) {\n        const response = await axios.get('https://jsonplaceholder.typicode.com/posts/' + id)\n        return response\n    }\n\n    static async getCommentsByPostId(id) {\n        const response = await axios.get(`https://jsonplaceholder.typicode.com/posts/${id}/comments`)\n        return response\n    }\n}","import React from 'react'\nimport classes from './Loader.module.css'\n\nfunction Loader() {\n    return (\n        <div className={classes.loader}>\n            \n        </div>\n    )\n}\n\nexport default Loader\n","import {useState} from 'react'\n\nexport const useFetching = (callback) => {\n    const [isLoading, setIsLoading] = useState(false)\n    const [error, setError] = useState('')\n\n    const fetching = async () => {\n        try {\n            setIsLoading(true)\n            await callback()\n        } catch (error) {\n            setError(error.message)\n        } finally {\n            setIsLoading(false)\n        }\n    }\n\n    return [fetching, isLoading, error]\n}","import React, {useState, useEffect} from 'react'\nimport { useParams } from 'react-router-dom'\nimport PostService from '../API/PostService'\nimport Loader from '../components/UI/Loader/Loader'\nimport { useFetching } from '../hooks/useFetching'\n\nfunction PostIdPage() {\n    const params = useParams()\n    const [post, setPost] = useState({})\n    const [comments, setComments] = useState([])\n    const [fetchPostById, isLoading, error] = useFetching( async () => {\n        const response = await PostService.getById(params.id)\n        setPost(response.data)\n    })\n    const [fetchComments, isCommentsLoading, commentsError] = useFetching( async () => {\n        const response = await PostService.getCommentsByPostId(params.id)\n        setComments(response.data)\n    })\n\n    useEffect(() => {\n        fetchPostById(params.id)\n        fetchComments(params.id)\n    }, [])\n \n\n    return (\n        <div>\n            <h2>Вы открыли страницу поста с ID = {params.id}</h2>\n            {isLoading\n                ? <div style={{display: 'flex', justifyContent: 'center', marginTop: '50px'}}><Loader/></div>\n                : <div>{post.id}. {post.title}</div>\n            }\n            <h3>Комментарии</h3>\n            {isCommentsLoading\n                ? <div style={{display: 'flex', justifyContent: 'center', marginTop: '50px'}}><Loader/></div>\n                : <div>\n                    {comments.map(comment => \n                        <div key={comment.id} style={{marginTop: 15}}>\n                            <h5>{comment.email}</h5>\n                            <div>{comment.body}</div>\n                        </div>    \n                    )}\n                </div>\n            }\n        </div>\n    )\n}\n\nexport default PostIdPage\n","import React from 'react'\n\nfunction MySelect({options, defaultValue, value, onChange}) {\n    return (\n        <select \n            value={value}\n            onChange={event => onChange(event.target.value)}\n        >\n            <option disabled value=\"\">{defaultValue}</option>\n            {options.map(option => \n                <option key={option.value} value={option.value}>\n                    {option.name}\n                </option>\n            )}\n        </select>\n    )\n}\n\nexport default MySelect\n","import React from 'react'\nimport MyInput from './UI/input/MyInput';\nimport MySelect from './UI/select/MySelect'\n\nfunction PostFilter({filter, setFilter}) {\n    return (\n        <div className=\"\">\n            <MyInput\n            value={filter.query}\n            onChange={e => setFilter({...filter, query: e.target.value})}\n            placeholder=\"Поиск...\"\n            />\n            <MySelect\n            value={filter.sort}\n            onChange={selectedSort => setFilter({...filter, sort: selectedSort})}\n            defaultValue=\"Сортировка по\"\n            options={[\n                {value: 'title', name: 'По названию'},\n                {value: 'body', name: 'По описанию'},\n            ]}\n            />\n        </div>\n    )\n}\n\nexport default PostFilter\n","import React, {useState, useRef} from 'react'\nimport MyInput from './UI/input/MyInput';\nimport MyButton from './UI/button/MyButton'\n\nfunction PostForm({create}) {\n\n    const [post, setPost] = useState({title: '', body: '',})\n    // const bodyInputRef = useRef()\n\n\n    const addNewPost = (e) => {\n        e.preventDefault()\n        const newPost = {\n            ...post, id: Date.now()\n        }\n        create(newPost)\n        setPost({title: '', body: '',})\n      }\n\n\n    return (\n\n        <form>\n            {/*Управляемый компонент*/}\n            <MyInput \n            value={post.title}\n            onChange={e => setPost({...post, title: e.target.value})}\n            type=\"text\" \n            placeholder=\"Название поста\"\n            />\n            <MyInput \n            value={post.body}\n            onChange={e => setPost({...post, body: e.target.value})}\n            type=\"text\" \n            placeholder=\"Описание поста\"\n            />\n            {/*Неуправляемый/неконтролируемый компонент\n            <MyInput \n            ref={bodyInputRef}\n            type=\"text\" \n            placeholder=\"Описание поста\"\n            />*/}\n            <MyButton onClick={addNewPost}>Создать пост</MyButton>\n        </form> \n     \n    )\n}\n\nexport default PostForm\n","import React from 'react'\nimport { useHistory } from 'react-router-dom'\nimport MyButton from './UI/button/MyButton'\n\nfunction PostItem(props) {\n    const router = useHistory()\n    return (\n        <div className=\"post\">\n            <div className=\"post__content\">\n                <strong>{props.post.id} {props.post.title}</strong>\n                <div className=\"\">{props.post.body}</div>\n            </div>\n            <div className=\"post__buttons\">\n                <MyButton onClick={() => router.push(`/posts/${props.post.id}`)}>\n                    Открыть\n                </MyButton>\n                <MyButton onClick={() => props.remove(props.post)}>\n                    Удалить\n                </MyButton>\n            </div> \n        </div>\n    )\n}\n\nexport default PostItem\n","import React from 'react'\nimport PostItem from './PostItem'\nimport {\n    CSSTransition,\n    TransitionGroup,\n  } from 'react-transition-group';\n\nfunction PostList({posts, title, remove}) {\n    if (!posts.length) {\n        return (\n            <h2 style={{textAlign:'center'}} className=\"\">Посты не найдены</h2>\n        )\n    }\n\n\n    return (\n        <div>\n            <h1 style={{textAlign:'center'}}>{title}</h1>\n            <TransitionGroup>\n                {posts.map((post, index) => \n                    <CSSTransition\n                        key={post.id}\n                        timeout={500}\n                        classNames=\"post\"\n                    >\n                        <PostItem remove={remove} number={index + 1} post={post} />\n                    </CSSTransition>\n                )} \n            </TransitionGroup>\n\n        </div>\n    )\n}\n\nexport default PostList\n","import React from 'react'\nimport classes from './MyModal.module.css'\n\nfunction MyModal({children, visible, setVisible}) {\n\n    const rootClasses = [classes.myModal]\n    if(visible) {\n        rootClasses.push(classes.active)\n    }\n\n    return (\n        <div className={rootClasses.join(' ')} onClick={() => setVisible(false)}>\n            <div className={classes.myModalContent} onClick={(e) => e.stopPropagation()}>\n                {children}\n            </div>\n        </div>\n    )\n}\n\nexport default MyModal\n","import {useMemo} from 'react'\n\nexport const useSortedPosts = (posts, sort) => {\n    const sortedPosts = useMemo(() => {\n        console.log('отработал алгоритм сортировки')\n        if(sort) {\n          return [...posts].sort((a, b) => a[sort].localeCompare(b[sort]))\n        }\n        return posts\n      }, [sort, posts])\n\n    return sortedPosts;\n}\n\nexport const usePosts = (posts, sort, query) => {\n    const sortedPosts = useSortedPosts(posts, sort);\n\n    const sortedAndSearchedPosts = useMemo(() => {\n        return sortedPosts.filter(post => post.title.toLowerCase().includes(query.toLowerCase()))\n    }, [query, sortedPosts])\n\n    return sortedAndSearchedPosts;\n}\n\n","export const getPageCount = (totalCount, limit) => {\n    return Math.ceil(totalCount/limit)\n}\n\nexport const getPagesArray = (totalPages) => {\n    let result = []\n    for (let i = 0; i < totalPages; i++) {\n        result.push(i + 1);\n    }\n    return result\n}","import React from 'react'\nimport { getPagesArray } from '../../../utils/pages';\n\nfunction Pagination({totalPages, page, changePage}) {\n    let pagesArray = getPagesArray(totalPages)\n\n    return (\n        <div className=\"page__wrapper\">\n            {pagesArray.map(p => \n            <span\n                onClick={() => changePage(p)} \n                key={p} \n                className={page === p ? \"page page__current\" : \"page\"}\n            >\n                {p}\n            </span>\n            )}\n        </div>\n    )\n}\n\nexport default Pagination\n","import React, {useState, useEffect, useRef} from 'react';\nimport PostFilter from '../components/PostFilter';\nimport PostForm from '../components/PostForm';\nimport PostList from '../components/PostList';\nimport MyButton from '../components/UI/button/MyButton'\nimport MyModal from '../components/UI/modal/MyModal';\nimport { usePosts } from '../hooks/usePosts';\nimport '../styles/App.css';\nimport PostService from '../API/PostService';\nimport Loader from '../components/UI/Loader/Loader';\nimport { useFetching } from '../hooks/useFetching';\nimport { getPageCount } from '../utils/pages';\nimport Pagination from '../components/UI/pagination/Pagination';\nimport { useObserver } from '../hooks/useObserver';\nimport MySelect from '../components/UI/select/MySelect';\n\nfunction Posts() {\n\n  const [posts, setPosts] = useState([])\n  const [filter, setFilter] = useState({sort: '', query: ''})\n  const [modal, setModal] = useState(false)\n  const [totalPages, setTotalPages] = useState(0)\n  const [limit, setLimit] = useState(10)\n  const [page, setPage] = useState(1)\n  const sortedAndSearchedPosts = usePosts(posts, filter.sort, filter.query);\n  const lastElement = useRef()\n\n\n  const [fetchPosts, isPostsLoading, postError] = useFetching( async () => {\n    const response = await PostService.getAll(limit, page);\n    setPosts([...posts, ...response.data])\n    const totalCount = (response.headers['x-total-count'])\n    setTotalPages(getPageCount(totalCount, limit))\n  })\n\n  useObserver(lastElement, page < totalPages, isPostsLoading, () => {\n    setPage(page + 1)\n  })\n\n  useEffect(() => {\n    fetchPosts(limit, page)\n  }, [page, limit])\n\n  const createPost = (newPost) => {\n    setPosts([...posts, newPost])\n    setModal(false)\n  }\n  //Получает post из дочернего компонента\n  const removePost = (post) => {\n    setPosts(posts.filter(p => p.id !== post.id))\n  }\n\n\n  const changePage = (page) => {\n    setPage(page)\n  }\n\n  return (\n    <div className=\"App\">\n      <MyButton style={{marginTop: 30}} onClick={() => setModal(true)}>\n        Создать пост\n      </MyButton>\n      <MyModal visible={modal} setVisible={setModal}>\n        <PostForm create={createPost}/>\n      </MyModal>\n      <hr style={{margin: '15px 0'}}/>\n      <PostFilter filter={filter} setFilter={setFilter}/>\n\n      <MySelect \n        value={limit}\n        onChange={value => setLimit(value)}\n        defaultValue=\"Кол-во эдементов на странице\"\n        options={[\n          {value: 5, name: '5'},\n          {value: 10, name: '10'},\n          {value: 25, name: '25'},\n          {value: -1, name: 'Показать все'},\n        ]}\n      \n      />\n\n      {postError && \n        <h1>Произошла ошибка ${postError}</h1>\n      }\n      <PostList remove={removePost} posts={sortedAndSearchedPosts} title={'Посты про JS'}/>\n      <div ref={lastElement} style={{height: 20, background: 'red'}}></div>\n      {isPostsLoading &&\n        <div style={{display: 'flex', justifyContent: 'center', marginTop: '50px'}}><Loader/></div>\n      }\n      <Pagination \n        page={page}\n        changePage={changePage} \n        totalPages={totalPages}\n      />\n    </div>\n  );\n}\n\nexport default Posts;\n\n","import About from \"../pages/About\";\nimport Login from \"../pages/Login\";\nimport PostIdPage from \"../pages/PostIdPage\";\nimport Posts from \"../pages/Posts\";\n\nexport const privateRoutes = [\n    {path: '/about', component: About, exact: true},\n    {path: '/posts', component: Posts, exact: true},\n    {path: '/posts/:id', component: PostIdPage, exact: true},\n    \n]\n\nexport const publicRoutes = [\n    {path: '/login', component: Login, exact: true},\n]","import {useRef, useEffect} from 'react'\n\nexport const useObserver = (ref, canLoad, isLoading, callback) => {\n    const observer = useRef()\n    useEffect(() => {\n        if(isLoading) return;\n        if(observer.current) observer.current.disconnect()\n        var cb = function(entries, observer) {\n          if(entries[0].isIntersecting && canLoad){\n            callback()\n          }\n        };\n        observer.current = new IntersectionObserver(cb)\n        observer.current.observe(ref.current)\n    }, [isLoading])\n}","import React, { useContext } from 'react'\nimport { Redirect, Route, Switch} from 'react-router-dom'\nimport { privateRoutes, publicRoutes } from '../router';\nimport { AuthContext } from '../context';\nimport Loader from './UI/Loader/Loader';\n\nfunction AppRouter() {\n    const {isAuth, setIsAuth, isLoading} = useContext(AuthContext)\n\n    if(isLoading) {\n        return <Loader/>\n    }\n\n    return (\n        isAuth\n            ?\n            <Switch>\n                {privateRoutes.map(route => \n                    <Route \n                        component={route.component} \n                        path={route.path} \n                        exact={route.exact}\n                        key={route.path}/>\n                )}\n\n                <Redirect to=\"/posts\"/>\n            </Switch>\n            :\n            <Switch>\n                {publicRoutes.map(route => \n                    <Route \n                        component={route.component} \n                        path={route.path} \n                        exact={route.exact}\n                        key={route.path}/>\n                )}\n\n                <Redirect to=\"/login\"/>\n            </Switch>\n\n\n\n\n    )\n}\n\nexport default AppRouter\n","import React, {useState, useEffect} from 'react';\nimport {BrowserRouter} from 'react-router-dom'\nimport './styles/App.css'\nimport NavBar from './components/UI/navbar/NavBar';\nimport AppRouter from './components/AppRouter';\nimport { AuthContext } from './context';\n\n\nfunction App() {\n  const [isAuth, setIsAuth] = useState(false)\n  const [isLoading, setIsLoading] = useState(true)\n\n  useEffect(() => {\n    if(localStorage.getItem('auth')){\n      setIsAuth(true)\n    }\n    setIsLoading(false)\n  }, [])\n\n  return (\n    <AuthContext.Provider value={{\n      isAuth,\n      setIsAuth,\n      isLoading\n\n    }}>\n      <BrowserRouter>\n        <NavBar/>\n        <AppRouter/>\n      </BrowserRouter>\n    </AuthContext.Provider>\n\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\n\nReactDOM.render(\n  // <React.StrictMode>\n    <App />,\n  // </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}